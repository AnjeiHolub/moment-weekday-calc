/*! moment-weekday-calc 1.0.2 andruhon <andrew@kondratev.pro> 2015-07-21 */
"undefined"!=typeof require&&(moment=require("moment")),function(a){function b(b,d,e,f,g){if(this.rangeStart=a(b),this.rangeEnd=a(d),this.exclusions=f,this.useIsoWeekday=1==g,this.rangeStart.isAfter(this.rangeEnd))throw new c("rangeStart is after rangeEnd");this.weekdays=this.parseWeekdays(e)}function c(a){this.message=a,this.name="WeekDayCalcException"}b.prototype.parseWeekdays=function(b){var d=[];if(!b)throw new c("weekdays must be defined");if(b.length>7)throw new c("Weekdays array exceeding week length of 7 days");for(var e=0;e<b.length;e++){var f=b[e];if(this.useIsoWeekday){if(isNaN(f))throw new c("isoWeekDayCalc accepts weekdays as numbers only, try using weekdayCalc if you need a locale aware behaviour");if(1>f||f>7)throw new c("The weekday is out of 1 to 7 range")}else if(isNaN(f))f=a().day(f).weekday();else if(0>f||f>6)throw new c("The weekday is out of 0 to 6 range");if(d.indexOf(f)>=0)throw new c("Weekdays set contains duplicate weekday");d.push(f)}return d},b.prototype.calculate=function(){var a=0,b=this.rangeStart.clone().endOf("week"),c=this.rangeEnd.clone().startOf("week");if(c.diff(b,"days")<30||this.exclusions)a=this.calculateIterative(this.rangeStart,this.rangeEnd,this.weekdays,this.exclusions);else{var d=Math.round(c.diff(b,"weeks",!0));a+=d*this.weekdays.length,a+=this.calculateIterative(this.rangeStart,b,this.weekdays),a+=this.calculateIterative(c,this.rangeEnd,this.weekdays)}return a},b.prototype.calculateIterative=function(b,c,d,e){var f=0,g=b.clone(),h=[];if(e)for(;e.length>0;)h.push(a(e.shift()).format("YYYY-MM-DD"));for(;g.valueOf()<=c.valueOf();){var i=this.useIsoWeekday?"isoWeekday":"weekday";d.indexOf(g[i]())>=0&&(0==h.length||h.indexOf(g.format("YYYY-MM-DD"))<0)&&f++,g.add(1,"day")}return f},Function.prototype.construct=function(a){var b=this,c=function(){b.apply(this,a)};return c.prototype=b.prototype,new c},c.prototype=new Error,b.prototype.WeekDayCalcException=c;var d=function(b,d){var e,f,g,h;switch(d.length){case 4:e=a(d[0]).startOf("day"),f=a(d[1]).endOf("day"),g=d[2],h=d[3];break;case 3:e=a(d[0]).startOf("day"),f=a(d[1]).endOf("day"),g=d[2];break;case 2:e=b,f=d[0],g=d[1];break;case 1:var i=d[0];i&&i.rangeEnd&&i.weekdays?(e=i.rangeStart?a(i.rangeStart).startOf("day"):b,f=a(i.rangeEnd).endOf("day"),g=i.weekdays,h=i.exclusions):(e=b.clone().startOf("year"),f=b.clone().endOf("year"),g=i);break;default:new c("unexpected arguments length "+d.length+". Expecting 1 to 4 args")}if(e.isAfter(f)){var j=e.clone();e=f.clone(),f=j}return[e,f,g,h]};a.fn.weekdayCalc=function(){var a=b.construct(d(this,arguments));return a.calculate()},a.fn.isoWeekdayCalc=function(){var a=d(this,arguments);a.push(!0);var c=b.construct(a);return c.calculate()},"object"==typeof exports&&"undefined"!=typeof module?module.exports=b:"function"==typeof define&&define.amd?define(b):this.WeekDayCalc=b}(moment);
//# sourceMappingURL=moment-weekday-calc.min.js.map